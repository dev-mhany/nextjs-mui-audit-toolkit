# Next.js + MUI Audit Toolkit - Environment Configuration
# Copy this file to .env.local and fill in your values

# =============================================================================
# REQUIRED - GitHub Integration
# =============================================================================

# GitHub Personal Access Token for API access (fallback)
# Create at: https://github.com/settings/tokens
# Required scopes: repo, workflow
GITHUB_TOKEN=your_github_personal_access_token_here

# GitHub App Configuration
# These are required for the GitHub App integration feature

# GitHub App ID (get this from your GitHub App settings)
GITHUB_APP_ID=your_github_app_id_here

# GitHub App Private Key (get this from your GitHub App settings)
# This should be the full private key content including headers
GITHUB_APP_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----
your_private_key_content_here
-----END RSA PRIVATE KEY-----"

# GitHub Webhook Secret (optional, for webhook signature verification)
GITHUB_WEBHOOK_SECRET=your_webhook_secret_here

# Database configuration (if using external database)
# DATABASE_URL=your_database_connection_string

# Email configuration (for notifications)
EMAIL_PROVIDER=smtp  # smtp, sendgrid, mailgun, resend
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=your_email@example.com
EMAIL_PASS=your_email_password_or_app_password
EMAIL_FROM_ADDRESS=noreply@your-domain.com
EMAIL_FROM_NAME="dev-mhany Audit Bot"

# Or for SendGrid:
# EMAIL_PROVIDER=sendgrid
# EMAIL_API_KEY=your_sendgrid_api_key

# Application URLs
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=your_nextauth_secret_here

# GitHub OAuth (if using OAuth in addition to GitHub App)
GITHUB_CLIENT_ID=your_github_oauth_client_id
GITHUB_CLIENT_SECRET=your_github_oauth_client_secret

# Rate limiting and security
GITHUB_API_RATE_LIMIT=5000
WEBHOOK_RATE_LIMIT=100

# Audit configuration
AUDIT_DEFAULT_MIN_SCORE=85
AUDIT_MAX_RUNTIME_MINUTES=15
AUDIT_ENABLE_RUNTIME_CHECKS=false

# Development settings
NODE_ENV=development
LOG_LEVEL=info

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================

# Vercel deployment configuration
# VERCEL_URL=your-app.vercel.app

# GitHub Actions deployment
# These are typically set as repository secrets in GitHub
# VERCEL_TOKEN=your_vercel_token
# VERCEL_ORG_ID=your_vercel_org_id
# VERCEL_PROJECT_ID=your_vercel_project_id

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# GitHub App Permissions (for reference)
# When creating the GitHub App, set these permissions:
# - Contents: Read & Write (commit PR branch)
# - Pull Requests: Write (open/comment PR)
# - Actions: Read (optional, for workflow status)
# - Checks: Write (post check summaries)
# - Metadata: Read (repository access)

# Rate limiting configuration
RATE_LIMIT_MAX=5
RATE_LIMIT_WINDOW_MS=60000

# Request timeout (milliseconds)
REQUEST_TIMEOUT_MS=30000

# =============================================================================
# LOGGING AND MONITORING
# =============================================================================

# Log level (error, warn, info, debug)
LOG_LEVEL=info

# Enable performance monitoring
ENABLE_PERFORMANCE_MONITORING=true

# Analytics configuration (optional)
# ANALYTICS_API_KEY=your_analytics_key

# =============================================================================
# DEVELOPMENT CONFIGURATION
# =============================================================================

# Development mode settings
NODE_ENV=development

# Enable debug logging in development
DEBUG=nextjs-mui-audit-toolkit:*

# Disable SSL verification in development (not recommended for production)
# NODE_TLS_REJECT_UNAUTHORIZED=0

# =============================================================================
# PRODUCTION OPTIMIZATIONS
# =============================================================================

# Enable compression
ENABLE_COMPRESSION=true

# Enable caching
ENABLE_CACHING=true

# Cache TTL (seconds)
CACHE_TTL=300

# Maximum concurrent audits
MAX_CONCURRENT_AUDITS=10

# =============================================================================
# EXAMPLE CONFIGURATIONS
# =============================================================================

# Example Gmail SMTP configuration:
# EMAIL_PROVIDER=smtp
# EMAIL_HOST=smtp.gmail.com
# EMAIL_PORT=587
# EMAIL_SECURE=false
# EMAIL_USER=your-email@gmail.com
# EMAIL_PASS=your-app-password  # Use App Password, not regular password

# Example SendGrid configuration:
# EMAIL_PROVIDER=sendgrid
# EMAIL_API_KEY=SG.your-sendgrid-api-key-here

# Example production webhook configuration:
# GITHUB_WEBHOOK_SECRET=a-very-secure-random-string-at-least-32-characters-long
# NEXTAUTH_URL=https://your-audit-app.vercel.app

# Example GitHub App configuration:
# GITHUB_APP_ID=123456
# GITHUB_APP_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----\nMIIEpAIBAAKCAQEA...\n-----END RSA PRIVATE KEY-----"
# 
# GitHub App Setup Instructions:
# 1. Go to https://github.com/settings/apps
# 2. Click "New GitHub App"
# 3. Set the following:
#    - Homepage URL: https://your-audit-app.vercel.app
#    - Webhook URL: https://your-audit-app.vercel.app/api/auth/github/callback
#    - Webhook secret: Use the same value as GITHUB_WEBHOOK_SECRET
#    - Permissions: Contents (R&W), Pull Requests (Write), Checks (Write), Metadata (Read)
#    - Subscribe to events: Push, Pull Request, Installation
# 4. Generate and download private key
# 5. Copy App ID and private key to environment variables